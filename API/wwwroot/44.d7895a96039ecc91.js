"use strict";(self.webpackChunkonline_board_game_frontend=self.webpackChunkonline_board_game_frontend||[]).push([[44],{1044:(ht,U,l)=>{l.r(U),l.d(U,{GameModule:()=>dt});var $=l(2163),g=l(7579),h=l(1135),c=l(2722),y=l(5698),L=l(4004),F=(()=>{return(n=F||(F={})).CHAMBER_I="CHAMBER_I",n.CHAMBER_L="CHAMBER_L",n.CHAMBER_T="CHAMBER_T",n.CHAMBER_X="CHAMBER_X",n.CORRIDOR_I="CORRIDOR_I",n.CORRIDOR_L="CORRIDOR_L",n.CORRIDOR_T="CORRIDOR_T",n.CORRIDOR_X="CORRIDOR_X",n.HEALING_I="HEALING_I",n.HEALING_L="HEALING_L",n.HEALING_T="HEALING_T",n.HEALING_X="HEALING_X",n.EMPTY_FIELD="EMPTY_FIELD",F;var n})(),e=l(4650),B=l(8724),J=l(5079),f=l(2076);class S{static generatePossibleFields(o){const t=[];return o.forEach(i=>t.push({position:i})),t}static sortPlayers(o){return o.sort((t,i)=>t.queueOrder<i.queueOrder?-1:1)}}var I=l(991);let q=(()=>{class n{constructor(t){this.auth=t}initGameConnection(){return this.gameHubConnection=(new B.s).withUrl("/game",{accessTokenFactory:()=>this.auth.getJwtToken(),skipNegotiation:!0,transport:J.n.WebSockets}).build(),(0,f.D)(this.gameHubConnection.start())}getRouteField(){return(0,f.D)(this.gameHubConnection.invoke("GetRouteField"))}setRouteField(t,i){return(0,f.D)(this.gameHubConnection.invoke("SetRouteField",{position:t,rotation:i}))}getPositionsToMove(){return(0,f.D)(this.gameHubConnection.invoke("GetPositionsToMove"))}movePlayer(t){return(0,f.D)(this.gameHubConnection.invoke("Move",t))}rollTheDice(){return(0,f.D)(this.gameHubConnection.invoke("RollTheDice"))}calculateFight(t){return(0,f.D)(this.gameHubConnection.invoke("CalculateFight",{damageScrollsUsed:t}))}fight(t){return(0,f.D)(this.gameHubConnection.invoke("StartFight",{damageScrollsUsed:t})).pipe((0,L.U)(i=>i.fightResult))}pickUpItem(){return(0,f.D)(this.gameHubConnection.invoke("PickUpItem"))}openChest(){return(0,f.D)(this.gameHubConnection.invoke("OpenChest"))}useHealingScroll(){return(0,f.D)(this.gameHubConnection.invoke("UseHealingScroll"))}roundOver(){return(0,f.D)(this.gameHubConnection.invoke("RoundOver"))}listenToPlayersCharactersChosen(){const t=new g.x;return this.gameHubConnection.on("players_selected",i=>t.next(S.sortPlayers(i))),t}listenToPlayerUpdated(){const t=new g.x;return this.gameHubConnection.on("player_updated",i=>t.next(i)),t}listenToRouteFieldAdded(){const t=new g.x;return this.gameHubConnection.on("route_field_placed",i=>t.next(i)),t}listenToRouteFieldUpdated(){const t=new g.x;return this.gameHubConnection.on("route_field_updated",i=>t.next(i)),t}listenToPlayerRoundStarted(){const t=new g.x;return this.gameHubConnection.on("round_started",i=>t.next(i)),t}listenToPlayerMoved(){const t=new g.x;return this.gameHubConnection.on("player_moved",i=>t.next(i)),t}listenToFightStarted(){const t=new g.x;return this.gameHubConnection.on("fight_started",i=>t.next(i)),t}listenToDiceRolled(){const t=new g.x;return this.gameHubConnection.on("dice_rolled",i=>t.next(i)),t}listenToFightCalculated(){const t=new g.x;return this.gameHubConnection.on("fight_calculated",i=>t.next(i)),t}listenToFightOver(){const t=new g.x;return this.gameHubConnection.on("fight_over",i=>t.next(i.fightResult)),t}listenToGameOver(){const t=new g.x;return this.gameHubConnection.on("game_ended",i=>t.next(i)),t}closeGameConnection(){this.gameHubConnection.stop()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(I.e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),D=(()=>{class n{constructor(){this.currentFieldType$=new h.X(F.EMPTY_FIELD),this.currentFieldRotation$=new h.X(0),this.possibleFieldsWithCurrentFieldRotation$=new h.X([])}rotateToLeft(){this.currentFieldRotation$.next((this.currentFieldRotation$.value-90+360)%360),this.possibleFieldsWithCurrentFieldRotation$.next(S.generatePossibleFields(this.routeFieldToPlace.positionsToPlace[this.currentFieldRotation$.value]))}rotateToRight(){this.currentFieldRotation$.next((this.currentFieldRotation$.value+90)%360),this.possibleFieldsWithCurrentFieldRotation$.next(S.generatePossibleFields(this.routeFieldToPlace.positionsToPlace[this.currentFieldRotation$.value]))}setPossibleFields(t){this.routeFieldToPlace=t,this.currentFieldType$.next(t.fieldType),this.possibleFieldsWithCurrentFieldRotation$.next(S.generatePossibleFields(this.routeFieldToPlace.positionsToPlace[this.currentFieldRotation$.value]))}clearPossibleFields(){this.possibleFieldsWithCurrentFieldRotation$.next([])}getCurrentRotation(){return this.currentFieldRotation$.value}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var u=l(5412),w=(()=>{return(n=w||(w={})).ATTACK_SCROLL="ATTACK_SCROLL",n.HEALING_SCROLL="HEALING_SCROLL",w;var n})(),M=(()=>{return(n=M||(M={})).BEGIN="BEGIN",n.ROLL_THE_DICE="ROLL_THE_DICE",n.FIGHT="FIGHT",M;var n})(),Z=l(6145),d=l(6895),b=l(7392),x=l(4859),O=l(3081);function Q(n,o){1&n&&(e.TgZ(0,"button",13),e._UZ(1,"mat-icon",14),e.qZA()),2&n&&e.Q6J("mat-dialog-close",!1)}function G(n,o){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Udp("grid-area","player-strength"),e.xp6(1),e.Oqu(t.playerStrength)}}function j(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"img",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onToggleUsedScroll(0))}),e.qZA()}if(2&n){const t=e.oxw();e.ekj("scroll--used",t.isScrollSelected(0)),e.Q6J("src","/assets/images/equipments/"+t.fightPlayer.equipment.scroll1.name+".png",e.LSH)}}function X(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"img",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onToggleUsedScroll(1))}),e.qZA()}if(2&n){const t=e.oxw();e.ekj("scroll--used",t.isScrollSelected(1)),e.Q6J("src","/assets/images/equipments/"+t.fightPlayer.equipment.scroll2.name+".png",e.LSH)}}function W(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"img",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onToggleUsedScroll(2))}),e.qZA()}if(2&n){const t=e.oxw();e.ekj("scroll--used",t.isScrollSelected(2)),e.Q6J("src","/assets/images/equipments/"+t.fightPlayer.equipment.scroll3.name+".png",e.LSH)}}function z(n,o){if(1&n&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"lowercase"),e.qZA()),2&n){const t=e.oxw();e.Udp("grid-area","result"),e.xp6(1),e.hij(" ",e.lcZ(2,3,e.lcZ(3,5,"fight-dialog.result."+t.fightResult))," ")}}function V(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onRollTheDice())}),e._UZ(1,"mat-icon",19),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.Udp("grid-area","action"),e.xp6(1),e.Q6J("svgIcon","dice-solid"),e.xp6(1),e.hij(" ",e.lcZ(3,4,"fight-dialog.button.roll-the-dice")," "))}function K(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onFight())}),e._UZ(1,"mat-icon",19),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.Udp("grid-area","action"),e.xp6(1),e.Q6J("svgIcon","swords-solid"),e.xp6(1),e.hij(" ",e.lcZ(3,4,"fight-dialog.button.fight")," "))}function ee(n,o){if(1&n&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Udp("grid-area","enemy-strength"),e.xp6(1),e.Oqu(t.fight.enemyDamage)}}let te=(()=>{class n extends Z.H{constructor(t,i,s){super(),this.fight=t,this.gamedStore=i,this.roundStore=s,this.fightState=M.BEGIN,this.usedScrolls=[!1,!1,!1],this.fightResult=void 0,this.diceRolledResult=[0,0],this.playerStrength=0,this.FightState=M,this.Scroll=w}get selectedScrolls(){return this.usedScrolls.filter(t=>!0===t).length}ngOnInit(){this.initDataHandle(),this.fightPlayer=this.gamedStore.players$.value.find(t=>t.userData.username===this.fight.userData.username)}onRollTheDice(){this.gamedStore.rollTheDice(this.selectedScrolls),this.fightState=M.ROLL_THE_DICE}onToggleUsedScroll(t){this.roundStore.isCurrentPlayersRound()&&(this.usedScrolls[t]=!this.usedScrolls[t]),this.gamedStore.calculateFight(this.selectedScrolls)}onFight(){this.fightState=M.FIGHT,this.gamedStore.fight(this.selectedScrolls)}isScrollSelected(t){return this.usedScrolls[t]}initDataHandle(){this.roundStore.diceRolledResult$.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.diceRolledResult=t),this.roundStore.playerStrength$.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.playerStrength=t),this.roundStore.numberOfUsedScrolls$.pipe((0,c.R)(this.destroyed$)).subscribe(t=>{this.usedScrolls=[!1,!1,!1];for(let i=0;i<t;i++)this.usedScrolls[i]=!0}),this.roundStore.fightResult$.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.fightResult=t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.WI),e.Y36(T),e.Y36(C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["player-details-dialog"]],features:[e.qOj],decls:24,vars:32,consts:[["mat-dialog-title",""],[1,"mat-dialog-title__label"],["class","mat-dialog-title__close-button","mat-icon-button","",3,"mat-dialog-close",4,"ngIf"],["mat-dialog-content",""],[1,"fight-container"],["alt","player image",1,"image",3,"src"],[1,"name"],["class","strength",3,"grid-area",4,"ngIf"],[1,"scrolls"],["class","scroll","alt","scroll equipment",3,"src","scroll--used","click",4,"ngIf"],["class","fight-result",3,"grid-area",4,"ngIf"],["mat-flat-button","","class","action",3,"grid-area","click",4,"ngIf"],["alt","enemy image",1,"image",3,"src"],["mat-icon-button","",1,"mat-dialog-title__close-button",3,"mat-dialog-close"],["svgIcon","times-square-solid"],[1,"strength"],["alt","scroll equipment",1,"scroll",3,"src","click"],[1,"fight-result"],["mat-flat-button","",1,"action",3,"click"],[3,"svgIcon"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Q,2,1,"button",2),e.qZA(),e.TgZ(5,"div",3)(6,"div",4),e._UZ(7,"img",5),e.TgZ(8,"div",6),e._uU(9),e.qZA(),e.YNc(10,G,2,3,"div",7),e.TgZ(11,"div",8),e.YNc(12,j,1,3,"img",9),e.YNc(13,X,1,3,"img",9),e.YNc(14,W,1,3,"img",9),e.qZA(),e.YNc(15,z,4,7,"div",10),e.YNc(16,V,4,6,"button",11),e.YNc(17,K,4,6,"button",11),e.YNc(18,ee,2,3,"div",7),e._UZ(19,"img",12),e.TgZ(20,"div",6),e._uU(21),e.ALo(22,"translate"),e.ALo(23,"lowercase"),e.qZA()()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,26,"fight-dialog.title")),e.xp6(2),e.Q6J("ngIf",i.fightResult),e.xp6(2),e.ekj("fight-container--result",void 0!==i.fightResult),e.xp6(1),e.Udp("grid-area","player-image"),e.Q6J("src","assets/images/characters/"+i.fightPlayer.characterName+".webp",e.LSH),e.xp6(1),e.Udp("grid-area","player-name"),e.xp6(1),e.Oqu(i.fight.userData.username),e.xp6(1),e.Q6J("ngIf",void 0===i.fightResult),e.xp6(1),e.Udp("grid-area","player-scrolls"),e.xp6(1),e.Q6J("ngIf",i.fightPlayer.equipment.scroll1&&i.fightPlayer.equipment.scroll1.name===i.Scroll.ATTACK_SCROLL),e.xp6(1),e.Q6J("ngIf",i.fightPlayer.equipment.scroll2&&i.fightPlayer.equipment.scroll2.name===i.Scroll.ATTACK_SCROLL),e.xp6(1),e.Q6J("ngIf",i.fightPlayer.equipment.scroll3&&i.fightPlayer.equipment.scroll3.name===i.Scroll.ATTACK_SCROLL),e.xp6(1),e.Q6J("ngIf",i.fightResult),e.xp6(1),e.Q6J("ngIf",i.fightState===i.FightState.BEGIN&&i.roundStore.isCurrentPlayersRound()),e.xp6(1),e.Q6J("ngIf",i.fightState===i.FightState.ROLL_THE_DICE&&i.roundStore.isCurrentPlayersRound()),e.xp6(1),e.Q6J("ngIf",void 0===i.fightResult),e.xp6(1),e.Udp("grid-area","enemy-image"),e.Q6J("src","assets/images/enemies/"+i.fight.enemyName+".webp",e.LSH),e.xp6(1),e.Udp("grid-area","enemy-name"),e.xp6(1),e.Oqu(e.lcZ(22,28,e.lcZ(23,30,"enemies."+i.fight.enemyName))))},dependencies:[d.O5,u.ZT,u.uh,u.xY,b.Hw,x.lW,O.X$,d.i8],styles:['.fight-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:180px 80px 80px 180px;grid-template-rows:30px 300px 50px 64px auto;grid-gap:0 15px;grid-template-areas:"player-name    .               .              enemy-name" "player-image   player-strength enemy-strength enemy-image" "player-image   action          action         enemy-image" "player-scrolls .               .              .";padding:0 15px 15px}.fight-container--result[_ngcontent-%COMP%]{grid-template-areas:"player-name    .               .              enemy-name" "player-image   result          result         enemy-image" "player-image   action          action         enemy-image" "player-scrolls .               .              ."}.image[_ngcontent-%COMP%]{width:100%;height:auto}.name[_ngcontent-%COMP%]{justify-self:center;align-self:center;font-family:SigmarOne,sans-serif;color:#ff6a4f;font-size:20px;letter-spacing:1px}.fight-result[_ngcontent-%COMP%]{justify-self:center;align-self:center;text-align:center;font-size:30px;font-family:SigmarOne,sans-serif;color:#ff6a4f}.strength[_ngcontent-%COMP%]{justify-self:center;align-self:center;font-family:SigmarOne,sans-serif;color:#ff6a4f;font-size:50px;letter-spacing:1px}.scrolls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.scrolls[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]{width:54px;height:54px;padding:5px 0;cursor:pointer;object-fit:cover;border-radius:2px}.scrolls[_ngcontent-%COMP%]   .scroll--used[_ngcontent-%COMP%]{background-color:#ffffff26}.mat-icon[_ngcontent-%COMP%]{margin-right:5px}']}),n})(),ne=(()=>{class n{constructor(t){this.fieldRotation=t}onRotateToLeft(){this.fieldRotation.rotateToLeft()}onRotateToRight(){this.fieldRotation.rotateToRight()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["field-rotation-dialog"]],decls:8,vars:15,consts:[["mat-dialog-content",""],["alt","route field",1,"field-img",3,"src"],["mat-flat-button","",3,"click"],[3,"svgIcon"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.ALo(2,"async"),e.ALo(3,"async"),e.TgZ(4,"button",2),e.NdJ("click",function(){return i.onRotateToLeft()}),e._UZ(5,"mat-icon",3),e.qZA(),e.TgZ(6,"button",2),e.NdJ("click",function(){return i.onRotateToRight()}),e._UZ(7,"mat-icon",3),e.qZA()()),2&t&&(e.xp6(1),e.Udp("grid-area","image")("transform","rotate("+e.lcZ(2,11,i.fieldRotation.currentFieldRotation$)+"deg)"),e.Q6J("src","assets/images/fields/"+e.lcZ(3,13,i.fieldRotation.currentFieldType$)+".webp",e.LSH),e.xp6(3),e.Udp("grid-area","left-btn"),e.xp6(1),e.Q6J("svgIcon","undo-solid"),e.xp6(1),e.Udp("grid-area","right-btn"),e.xp6(1),e.Q6J("svgIcon","redo-solid"))},dependencies:[u.xY,b.Hw,x.lW,d.Ov],styles:['.mat-dialog-content[_ngcontent-%COMP%]{display:grid;grid-gap:6px 3px;grid-template-areas:"image image" "left-btn right-btn";margin:12px 10px!important;padding:0!important}.field-img[_ngcontent-%COMP%]{width:150px;border-radius:2px;border:2px solid #000}']}),n})(),C=(()=>{class n{constructor(t,i){this.auth=t,this.dialog=i,this.currentRoundPlayer$=new h.X(void 0),this.movementPoints$=new h.X(4),this.positionsToMove$=new h.X([]),this.isDrawFieldButtonVisible$=new h.X(!1),this.isRoundOverButtonVisible$=new h.X(!1),this.diceRolledResult$=new h.X([0,0]),this.playerStrength$=new h.X(0),this.numberOfUsedScrolls$=new h.X(0),this.fightResult$=new g.x}start(t){this.currentRoundPlayer$.next(t),this.movementPoints$.next(4),this.positionsToMove$.next([]),this.showDrawFieldButton(),this.showRoundOverButton(),this.diceRolledResult([0,0]),this.setPlayerStrength(0),this.setNumberOfUsedScrolls(0),this.closeFightDialog(),this.closeFieldRotationDialog()}setMovementPoints(t){this.movementPoints$.next(t),0===t&&this.hideDrawFieldButton()}setPositionsToMove(t){this.positionsToMove$.next(t)}removePositionsToMove(){this.positionsToMove$.next([])}showDrawFieldButton(){const t=this.movementPoints$.value>0&&this.isCurrentPlayersRound();this.isDrawFieldButtonVisible$.next(t)}hideDrawFieldButton(){this.isDrawFieldButtonVisible$.next(!1)}showRoundOverButton(){this.isRoundOverButtonVisible$.next(this.isCurrentPlayersRound())}openFieldRotationDialog(){this.closeFieldRotationDialog(),this.removePositionsToMove(),this.fieldRotationDialogRef=this.dialog.open(ne,{autoFocus:!1,hasBackdrop:!1}),this.fieldRotationDialogRef.updatePosition({right:"20px",bottom:"20px"})}closeFieldRotationDialog(){this.fieldRotationDialogRef&&this.fieldRotationDialogRef.close()}openFightDialog(t){this.fightDialogRef=this.dialog.open(te,{data:t,autoFocus:!1,hasBackdrop:!0,backdropClass:"mat-dialog--no-clickable-background"})}closeFightDialog(){this.fightDialogRef&&this.fightDialogRef.close()}diceRolledResult(t){this.diceRolledResult$.next(t)}setPlayerStrength(t){this.playerStrength$.next(t)}setNumberOfUsedScrolls(t){this.numberOfUsedScrolls$.next(t)}setFightResult(t){this.fightResult$.next(t)}isCurrentPlayersRound(){return this.currentRoundPlayer$?.value?.username===this.auth.getUsername()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(I.e),e.LFG(u.uw))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),T=(()=>{class n{constructor(t,i,s){this.ws=t,this.fieldRotation=i,this.roundStore=s,this.gameSubscription$=new g.x,this.routeFields$=new h.X([]),this.players$=new h.X([]),this.playerMoved$=new h.X(void 0),this.gameOver$=new g.x}connectGameHub(){this.ws.initGameConnection().pipe((0,c.R)(this.gameSubscription$)).subscribe(()=>{this.ws.listenToPlayersCharactersChosen().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>this.players$.next(t)),this.ws.listenToPlayerUpdated().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>{const i=this.players$.value.find(s=>s.userData.username===t.userData.username);i.position=t.position,i.movementPoints=t.movementPoints,i.healthPoints=t.healthPoints,i.treasures=t.treasures,i.equipment=t.equipment,this.players$.next(this.players$.value)}),this.ws.listenToRouteFieldAdded().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>{this.routeFields$.next([...this.routeFields$.value,t])}),this.ws.listenToRouteFieldUpdated().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>{const i=this.routeFields$.value.find(s=>s.position.x===t.position.x&&s.position.y===t.position.y);i.chest=t.chest,i.itemName=t.itemName,i.enemy=t.enemy,this.routeFields$.next(this.routeFields$.value)}),this.ws.listenToPlayerRoundStarted().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>{this.roundStore.start(t),this.roundStore.isCurrentPlayersRound()&&this.getPositionsToMove()}),this.ws.listenToPlayerMoved().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>this.playerMoved$.next(t)),this.ws.listenToFightStarted().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>{this.roundStore.openFightDialog(t),this.calculateFight(0)}),this.ws.listenToDiceRolled().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>this.roundStore.diceRolledResult(t)),this.ws.listenToFightCalculated().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>{this.roundStore.setPlayerStrength(t.playerStrength),this.roundStore.setNumberOfUsedScrolls(t.damageScrollsUsed)}),this.ws.listenToFightOver().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>this.roundStore.setFightResult(t)),this.ws.listenToGameOver().pipe((0,c.R)(this.gameSubscription$)).subscribe(t=>this.gameOver$.next(t))})}getRouteField(){this.ws.getRouteField().pipe((0,y.q)(1),(0,L.U)(t=>class Y{static mapToRouteFieldToPlace(o){return{fieldType:o.fieldType,positionsToPlace:{0:o.positionsToPlace[0],90:o.positionsToPlace[1],180:o.positionsToPlace[2],270:o.positionsToPlace[3]}}}}.mapToRouteFieldToPlace(t))).subscribe(t=>{this.fieldRotation.setPossibleFields(t),this.roundStore.hideDrawFieldButton(),this.roundStore.openFieldRotationDialog()})}setRouteField(t,i){this.ws.setRouteField(t,i).pipe((0,y.q)(1)).subscribe(s=>{this.fieldRotation.clearPossibleFields(),this.roundStore.closeFieldRotationDialog(),this.roundStore.showDrawFieldButton(),this.playerMoved$.next(s),this.roundStore.setMovementPoints(s.movementPoints),this.getPositionsToMove()})}getPositionsToMove(){this.ws.getPositionsToMove().pipe((0,y.q)(1)).subscribe(t=>this.roundStore.setPositionsToMove(t))}movePlayer(t){this.ws.movePlayer(t).pipe((0,y.q)(1)).subscribe(i=>{this.playerMoved$.next(i),this.roundStore.setMovementPoints(i.movementPoints),this.getPositionsToMove()})}rollTheDice(t){this.ws.rollTheDice().pipe((0,y.q)(1)).subscribe(i=>{this.roundStore.diceRolledResult(i),this.calculateFight(t)})}calculateFight(t){this.ws.calculateFight(t).pipe((0,y.q)(1)).subscribe(i=>this.roundStore.setPlayerStrength(i.playerStrength))}fight(t){this.ws.fight(t).pipe((0,y.q)(1)).subscribe(i=>this.roundStore.setFightResult(i))}pickUpItem(){this.ws.pickUpItem().pipe((0,y.q)(1)).subscribe()}openChest(){this.ws.openChest().pipe((0,y.q)(1)).subscribe()}useHealingScroll(){this.ws.useHealingScroll().pipe((0,y.q)(1)).subscribe(()=>this.getPositionsToMove())}roundOver(){this.ws.roundOver().pipe((0,y.q)(1)).subscribe(()=>{this.roundStore.closeFieldRotationDialog(),this.fieldRotation.setPossibleFields({fieldType:F.EMPTY_FIELD,positionsToPlace:{0:[],90:[],180:[],270:[]}})})}disconnectGameHub(){this.ws.closeGameConnection(),this.gameSubscription$.next(!0),this.gameSubscription$.complete(),this.players$.next([]),this.routeFields$.next([]),this.playerMoved$.next(void 0)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(q),e.LFG(D),e.LFG(C))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var A=l(9299),ie=l(5179),R=l(9300),m=(()=>{return(n=m||(m={})).SCROLL_TO_POINT="SCROLL_TO_POINT",n.SHOW_INFO="SHOW_INFO",n.MOVE="MOVE",n.FIGHT="FIGHT",n.OPEN_CHEST="OPEN_CHEST",n.PICK_UP_ITEM="PICK_UP_ITEM",m;var n})();function oe(n,o){if(1&n&&(e.TgZ(0,"button",1),e._UZ(1,"mat-icon",2),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.Q6J("mat-dialog-close",t.FieldMenuAction.SCROLL_TO_POINT),e.xp6(1),e.Q6J("svgIcon","location-solid"),e.xp6(1),e.hij(" ",e.lcZ(3,3,"game.field-menu.scroll-to-point"),"\n")}}function se(n,o){if(1&n&&(e.TgZ(0,"button",1),e._UZ(1,"mat-icon",2),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.Q6J("mat-dialog-close",t.FieldMenuAction.SHOW_INFO),e.xp6(1),e.Q6J("svgIcon","info-square-solid"),e.xp6(1),e.hij(" ",e.lcZ(3,3,"game.field-menu.show-info"),"\n")}}function ae(n,o){if(1&n&&(e.TgZ(0,"button",1),e._UZ(1,"mat-icon",2),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.Q6J("mat-dialog-close",t.FieldMenuAction.MOVE),e.xp6(1),e.Q6J("svgIcon","walking-solid"),e.xp6(1),e.hij(" ",e.lcZ(3,3,"game.field-menu.move"),"\n")}}function re(n,o){if(1&n&&(e.TgZ(0,"button",1),e._UZ(1,"mat-icon",2),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.Q6J("mat-dialog-close",t.FieldMenuAction.FIGHT),e.xp6(1),e.Q6J("svgIcon","swords-solid"),e.xp6(1),e.hij(" ",e.lcZ(3,3,"game.field-menu.fight"),"\n")}}function le(n,o){if(1&n&&(e.TgZ(0,"button",1),e._UZ(1,"mat-icon",2),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.Q6J("mat-dialog-close",t.FieldMenuAction.OPEN_CHEST),e.xp6(1),e.Q6J("svgIcon","treasure-chest-solid"),e.xp6(1),e.hij(" ",e.lcZ(3,3,"game.field-menu.open-chest"),"\n")}}function ce(n,o){if(1&n&&(e.TgZ(0,"button",1),e._UZ(1,"mat-icon",2),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.Q6J("mat-dialog-close",t.FieldMenuAction.PICK_UP_ITEM),e.xp6(1),e.Q6J("svgIcon","hand-holding-medical-solid"),e.xp6(1),e.hij(" ",e.lcZ(3,3,"game.field-menu.pick-up-item"),"\n")}}let ue=(()=>{class n{constructor(t){this.fieldMenuItems=t,this.FieldMenuAction=m}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["field-menu-dialog-dialog"]],decls:6,vars:6,consts:[["mat-flat-button","",3,"mat-dialog-close",4,"ngIf"],["mat-flat-button","",3,"mat-dialog-close"],[3,"svgIcon"]],template:function(t,i){1&t&&(e.YNc(0,oe,4,5,"button",0),e.YNc(1,se,4,5,"button",0),e.YNc(2,ae,4,5,"button",0),e.YNc(3,re,4,5,"button",0),e.YNc(4,le,4,5,"button",0),e.YNc(5,ce,4,5,"button",0)),2&t&&(e.Q6J("ngIf",i.fieldMenuItems.includes(i.FieldMenuAction.SCROLL_TO_POINT)),e.xp6(1),e.Q6J("ngIf",i.fieldMenuItems.includes(i.FieldMenuAction.SHOW_INFO)),e.xp6(1),e.Q6J("ngIf",i.fieldMenuItems.includes(i.FieldMenuAction.MOVE)),e.xp6(1),e.Q6J("ngIf",i.fieldMenuItems.includes(i.FieldMenuAction.FIGHT)),e.xp6(1),e.Q6J("ngIf",i.fieldMenuItems.includes(i.FieldMenuAction.OPEN_CHEST)),e.xp6(1),e.Q6J("ngIf",i.fieldMenuItems.includes(i.FieldMenuAction.PICK_UP_ITEM)))},dependencies:[d.O5,u.ZT,b.Hw,x.lW,O.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.mat-flat-button[_ngcontent-%COMP%]{text-align:left!important}"]}),n})();var v=l(5377);function de(n,o){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"span",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div",13),e.qZA(),e._UZ(6,"img",14),e.TgZ(7,"span",15),e._uU(8),e.ALo(9,"translate"),e.ALo(10,"lowercase"),e.qZA(),e.TgZ(11,"span",15),e._uU(12),e.ALo(13,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Udp("grid-area","enemy"),e.xp6(2),e.Oqu(e.lcZ(4,12,"field-info-dialog.label.enemy")),e.xp6(3),e.Udp("grid-area","enemy-image"),e.Q6J("src","assets/images/enemies/"+t.data.enemy.name+".webp",e.LSH),e.xp6(1),e.Udp("grid-area","enemy-name"),e.xp6(1),e.Oqu(e.lcZ(9,14,e.lcZ(10,16,"enemies."+t.data.enemy.name))),e.xp6(3),e.Udp("grid-area","enemy-strength"),e.xp6(1),e.Oqu(e.lcZ(13,18,"field-info-dialog.label.enemy-strength")+": "+t.data.enemy.strength)}}function me(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"div",11)(2,"span",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div",13),e.qZA(),e._UZ(6,"img",17),e.TgZ(7,"span",15),e._uU(8),e.ALo(9,"translate"),e.ALo(10,"lowercase"),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Udp("grid-area","reward"),e.xp6(2),e.Oqu(e.lcZ(4,9,"field-info-dialog.label.reward")),e.xp6(3),e.Udp("grid-area","reward-image"),e.Q6J("src","assets/images/equipments/"+t.data.enemy.itemReward+".png",e.LSH),e.xp6(1),e.Udp("grid-area","reward-name"),e.xp6(1),e.Oqu(e.lcZ(9,11,e.lcZ(10,13,"equipments."+t.data.enemy.itemReward)))}}function pe(n,o){1&n&&(e.TgZ(0,"div",18)(1,"div",11)(2,"span",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div",13),e.qZA(),e._UZ(6,"img",19),e.qZA()),2&n&&(e.xp6(1),e.Udp("grid-area","chest"),e.xp6(2),e.Oqu(e.lcZ(4,6,"field-info-dialog.label.chest")),e.xp6(3),e.Udp("grid-area","chest-image"),e.Q6J("src","assets/images/equipments/CHEST.png",e.LSH))}function ge(n,o){if(1&n&&(e.TgZ(0,"div",20)(1,"div",11)(2,"span",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div",13),e.qZA(),e._UZ(6,"img",21),e.TgZ(7,"span",15),e._uU(8),e.ALo(9,"translate"),e.ALo(10,"lowercase"),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Udp("grid-area","item"),e.xp6(2),e.Oqu(e.lcZ(4,9,"field-info-dialog.label.item")),e.xp6(3),e.Udp("grid-area","item-image"),e.Q6J("src","assets/images/equipments/"+t.data.itemName+".png",e.LSH),e.xp6(1),e.Udp("grid-area","item-name"),e.xp6(1),e.Oqu(e.lcZ(9,11,e.lcZ(10,13,"equipments."+t.data.itemName)))}}function he(n,o){if(1&n&&(e.TgZ(0,"div",24),e._UZ(1,"img",25),e.TgZ(2,"span",15),e._uU(3),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.Udp("grid-area","players-image"),e.Q6J("src","assets/images/characters/"+t.characterName+"_ICON.webp",e.LSH),e.xp6(1),e.Udp("grid-area","players-name"),e.xp6(1),e.Oqu(t.userData.username)}}function fe(n,o){if(1&n&&(e.TgZ(0,"div",22)(1,"div",11)(2,"span",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div",13),e.qZA(),e.YNc(6,he,4,6,"div",23),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"field-info-dialog.label.players")),e.xp6(3),e.Q6J("ngForOf",t.data.players)}}let _e=(()=>{class n{constructor(t){this.data=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["field-info-dialog"]],decls:12,vars:9,consts:[["mat-dialog-title",""],[1,"mat-dialog-title__label"],["mat-icon-button","",1,"mat-dialog-title__close-button",3,"mat-dialog-close"],["svgIcon","times-square-solid"],["mat-dialog-content",""],["class","section enemy",4,"ngIf"],["class","section reward",4,"ngIf"],["class","section chest",4,"ngIf"],["class","section item",4,"ngIf"],["class","section players",4,"ngIf"],[1,"section","enemy"],[1,"title"],[1,"title__label"],[1,"title__line"],["alt","enemy image",1,"image",3,"src"],[1,"label"],[1,"section","reward"],["alt","reward image",1,"image",3,"src"],[1,"section","chest"],["alt","chest image",1,"image",3,"src"],[1,"section","item"],["alt","item image",1,"image",3,"src"],[1,"section","players"],["class","player",4,"ngFor","ngForOf"],[1,"player"],["alt","player image",1,"image",3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"mat-icon",3),e.qZA()(),e.TgZ(6,"div",4),e.YNc(7,de,14,20,"div",5),e.YNc(8,me,11,15,"div",6),e.YNc(9,pe,7,8,"div",7),e.YNc(10,ge,11,15,"div",8),e.YNc(11,fe,7,4,"div",9),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,7,"field-info-dialog.title")),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(3),e.Q6J("ngIf",i.data.enemy),e.xp6(1),e.Q6J("ngIf",i.data.enemy),e.xp6(1),e.Q6J("ngIf",i.data.chest),e.xp6(1),e.Q6J("ngIf",i.data.itemName),e.xp6(1),e.Q6J("ngIf",i.data.players&&i.data.players.length>0))},dependencies:[d.sg,d.O5,u.ZT,u.uh,u.xY,b.Hw,x.lW,O.X$,d.i8],styles:['.section[_ngcontent-%COMP%]{margin:0 10px 10px}.title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.title__label[_ngcontent-%COMP%]{color:#ff6a4f;font-family:SigmarOne,sans-serif}.title__line[_ngcontent-%COMP%]{flex:1;height:1px;background-color:#ff6a4f}.image[_ngcontent-%COMP%]{max-width:100px;max-height:100px;object-fit:contain}.label[_ngcontent-%COMP%]{color:#ff6a4f;align-self:center;font-family:SigmarOne,sans-serif}.enemy[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;grid-template-areas:"enemy enemy" "enemy-image enemy-name" "enemy-image enemy-strength"}.reward[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;grid-template-areas:"reward reward" "reward-image reward-name"}.chest[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:auto;grid-template-areas:"chest" "chest-image"}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;grid-template-areas:"item item" "item-image item-name"}.player[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto;grid-template-areas:"players-image players-name"}']}),n})();function ye(n,o){if(1&n&&(e.TgZ(0,"div",10),e._UZ(1,"img",11),e.TgZ(2,"span",12),e._uU(3),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("src","assets/images/characters/"+t.characterName+".webp",e.LSH),e.xp6(2),e.Oqu(t.userData.username)}}function ve(n,o){if(1&n&&(e.TgZ(0,"div",10),e._UZ(1,"img",11),e.TgZ(2,"span",12),e._uU(3),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("src","assets/images/characters/"+t.characterName+".webp",e.LSH),e.xp6(2),e.Oqu(t.userData.username)}}function Me(n,o){if(1&n&&(e.TgZ(0,"div",10),e._UZ(1,"img",11),e.TgZ(2,"span",12),e._uU(3),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("src","assets/images/characters/"+t.characterName+".webp",e.LSH),e.xp6(2),e.Oqu(t.userData.username)}}let be=(()=>{class n{constructor(t,i,s){this.router=t,this.dialogRef=i,this.results=s}onExit(){this.dialogRef.close(),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.F0),e.Y36(u.so),e.Y36(u.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["field-menu-dialog-dialog"]],decls:25,vars:27,consts:[["mat-dialog-title",""],[1,"mat-dialog-title__label"],["mat-dialog-content",""],[1,"podium-wrapper"],[1,"players"],["class","player",4,"ngFor","ngForOf"],[1,"podium"],[1,"podium__number"],["mat-dialog-actions",""],["mat-flat-button","",3,"click"],[1,"player"],["alt","character image",1,"player__image",3,"src"],[1,"player__name"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"div",4),e.YNc(7,ye,4,2,"div",5),e.qZA(),e.TgZ(8,"div",4),e.YNc(9,ve,4,2,"div",5),e.qZA(),e.TgZ(10,"div",4),e.YNc(11,Me,4,2,"div",5),e.qZA(),e.TgZ(12,"div",6)(13,"div",7),e._uU(14,"1"),e.qZA()(),e.TgZ(15,"div",6)(16,"div",7),e._uU(17,"2"),e.qZA()(),e.TgZ(18,"div",6)(19,"div",7),e._uU(20,"3"),e.qZA()()()(),e.TgZ(21,"div",8)(22,"button",9),e.NdJ("click",function(){return i.onExit()}),e._uU(23),e.ALo(24,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,23,"game-over-dialog.title")),e.xp6(4),e.Udp("grid-area","first-players")("align-self","end"),e.xp6(1),e.Q6J("ngForOf",i.results.firstPlace),e.xp6(1),e.Udp("grid-area","second-players")("align-self","end"),e.xp6(1),e.Q6J("ngForOf",i.results.secondPlace),e.xp6(1),e.Udp("grid-area","third-players")("align-self","end"),e.xp6(1),e.Q6J("ngForOf",i.results.thirdPlace),e.xp6(1),e.Udp("grid-area","first-podium"),e.xp6(3),e.Udp("grid-area","second-podium"),e.xp6(3),e.Udp("grid-area","third-podium"),e.xp6(5),e.Oqu(e.lcZ(24,25,"game-over-dialog.button.exit")))},dependencies:[d.sg,u.uh,u.xY,u.H8,x.lW,O.X$],styles:['.podium-wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:1fr 1fr 1fr;grid-template-rows:minmax(50px,auto) minmax(50px,auto) minmax(50px,auto) minmax(50px,auto);grid-template-areas:".              first-players .            " "second-players first-podium  .            " "second-podium  first-podium  third-players" "second-podium  first-podium  third-podium "}.podium[_ngcontent-%COMP%]{position:relative;background-color:#ff6a4fcc;border-radius:2px;border:2px solid #000}.podium__number[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:0;width:100%;text-align:center;color:#1f1b30;font-family:SigmarOne,sans-serif;font-size:40px}.players[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.player[_ngcontent-%COMP%]{text-align:center;margin:0 8px}.player__image[_ngcontent-%COMP%]{max-width:50px;max-height:100px;object-fit:contain}.player__name[_ngcontent-%COMP%]{display:block;font-family:SigmarOne,sans-serif;color:#ff6a4f;text-align:center;font-size:20px}.mat-dialog-content[_ngcontent-%COMP%]{overflow:hidden}']}),n})();var xe=l(3635),Ce=l(8263),N=l(8605);function Te(n,o){if(1&n&&e._UZ(0,"img",4),2&n){const t=e.oxw();e.Udp("transform","translate(-50%, -50%) rotate(-"+t.field.rotation+"deg)"),e.Q6J("src","assets/images/equipments/CHEST.png",e.LSH)}}function Re(n,o){if(1&n&&e._UZ(0,"img",5),2&n){const t=e.oxw();e.Udp("transform","translate(-50%, -50%) rotate(-"+t.field.rotation+"deg)"),e.Q6J("src","assets/images/equipments/"+t.field.itemName+".png",e.LSH)}}function Pe(n,o){if(1&n&&e._UZ(0,"img",6),2&n){const t=e.oxw();e.Udp("transform","translate(-50%, -50%) rotate(-"+t.field.rotation+"deg)"),e.Q6J("src","assets/images/enemies/"+t.field.enemy.name+".webp",e.LSH)}}let Fe=(()=>{class n{constructor(){this.canPlayerMoveToField=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["route-field"]],inputs:{field:"field",canPlayerMoveToField:"canPlayerMoveToField"},decls:4,vars:9,consts:[[1,"field"],["class","chest","alt","chest",3,"transform","src",4,"ngIf"],["class","item","alt","item",3,"transform","src",4,"ngIf"],["class","enemy","alt","enemy",3,"transform","src",4,"ngIf"],["alt","chest",1,"chest",3,"src"],["alt","item",1,"item",3,"src"],["alt","enemy",1,"enemy",3,"src"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Te,1,3,"img",1),e.YNc(2,Re,1,3,"img",2),e.YNc(3,Pe,1,3,"img",3),e.qZA()),2&t&&(e.Udp("background-image","url(/assets/images/fields/"+i.field.fieldType+".webp)")("transform","rotate("+i.field.rotation+"deg)"),e.ekj("field--possible-to-move",i.canPlayerMoveToField),e.xp6(1),e.Q6J("ngIf",i.field.chest),e.xp6(1),e.Q6J("ngIf",i.field.itemName),e.xp6(1),e.Q6J("ngIf",i.field.enemy))},dependencies:[d.O5],styles:["[_nghost-%COMP%]{display:block;height:150px;width:150px}.field[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-size:cover;background-position:center;cursor:pointer;transition:box-shadow .3s}.field--possible-to-move[_ngcontent-%COMP%]{box-shadow:inset 0 0 20px #fff6}.field[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 100px #ffffff25}.chest[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]{width:50px;position:absolute;top:50%;left:50%}.enemy[_ngcontent-%COMP%]{width:50px;position:absolute;top:30%;left:50%}"]}),n})(),Se=(()=>{class n{constructor(t){this.elementRef=t}ngAfterViewInit(){const t=1575-window.innerHeight/2,i=1575-window.innerWidth/2;this.elementRef.nativeElement.scroll(i,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["","scrollToCenter",""]]}),n})();function we(n,o){1&n&&e._UZ(0,"mat-icon",2),2&n&&e.Q6J("svgIcon","heart-light")}function Oe(n,o){1&n&&e._UZ(0,"mat-icon",2),2&n&&e.Q6J("svgIcon","heart-solid")}let Ie=(()=>{class n{constructor(){this.healthPoints=0}loopRange(t){return new Array(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["player-health"]],inputs:{healthPoints:"healthPoints"},decls:3,vars:2,consts:[[1,"health-container"],[3,"svgIcon",4,"ngFor","ngForOf"],[3,"svgIcon"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,we,1,1,"mat-icon",1),e.YNc(2,Oe,1,1,"mat-icon",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.loopRange(6-i.healthPoints)),e.xp6(1),e.Q6J("ngForOf",i.loopRange(i.healthPoints)))},dependencies:[d.sg,b.Hw],styles:[".health-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;height:100%;gap:2px}.mat-icon[_ngcontent-%COMP%]{height:60px;width:50px;color:#923840}"]}),n})();function De(n,o){if(1&n&&e._UZ(0,"img",11),2&n){const t=e.oxw();e.Q6J("src","/assets/images/equipments/"+t.equipment.weapon1.name+".png",e.LSH)}}function Ae(n,o){if(1&n&&e._UZ(0,"img",11),2&n){const t=e.oxw();e.Q6J("src","/assets/images/equipments/"+t.equipment.weapon2.name+".png",e.LSH)}}function Ze(n,o){1&n&&e._UZ(0,"img",11),2&n&&e.Q6J("src","/assets/images/equipments/KEY.png",e.LSH)}function ke(n,o){if(1&n&&e._UZ(0,"img",11),2&n){const t=e.oxw();e.Q6J("src","/assets/images/equipments/"+t.equipment.scroll1.name+".png",e.LSH)}}function Ee(n,o){if(1&n&&e._UZ(0,"img",11),2&n){const t=e.oxw();e.Q6J("src","/assets/images/equipments/"+t.equipment.scroll2.name+".png",e.LSH)}}function Ue(n,o){if(1&n&&e._UZ(0,"img",11),2&n){const t=e.oxw();e.Q6J("src","/assets/images/equipments/"+t.equipment.scroll3.name+".png",e.LSH)}}function Le(n,o){1&n&&e._UZ(0,"img",11),2&n&&e.Q6J("src","/assets/images/equipments/EMPTY_WEAPON_SLOT.png",e.LSH)}function qe(n,o){1&n&&e._UZ(0,"img",11),2&n&&e.Q6J("src","/assets/images/equipments/EMPTY_KEY_SLOT.png",e.LSH)}function Ne(n,o){1&n&&e._UZ(0,"img",11),2&n&&e.Q6J("src","/assets/images/equipments/EMPTY_SCROLL_SLOT.png",e.LSH)}let He=(()=>{class n{constructor(){this.useScroll=new e.vpe}useHealingScroll(t){!v.g.isNil(t)&&t===w.HEALING_SCROLL&&this.useScroll.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["player-equipment"]],inputs:{equipment:"equipment"},outputs:{useScroll:"useScroll"},decls:19,vars:12,consts:[[1,"equipment-container"],[1,"equipment-item",2,"grid-area","first-weapon"],["alt","player equipment",3,"src",4,"ngIf","ngIfElse"],[1,"equipment-item",2,"grid-area","second-weapon"],[1,"equipment-item",2,"grid-area","key"],[1,"equipment-item",2,"grid-area","first-scroll",3,"click"],[1,"equipment-item",2,"grid-area","second-scroll",3,"click"],[1,"equipment-item",2,"grid-area","third-scroll",3,"click"],["emptyWeaponSlot",""],["emptyKeySlot",""],["emptyScrollSlot",""],["alt","player equipment",3,"src"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,De,1,1,"img",2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,Ae,1,1,"img",2),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,Ze,1,1,"img",2),e.qZA(),e.TgZ(7,"div",5),e.NdJ("click",function(){return i.useHealingScroll(null==i.equipment||null==i.equipment.scroll1?null:i.equipment.scroll1.name)}),e.YNc(8,ke,1,1,"img",2),e.qZA(),e.TgZ(9,"div",6),e.NdJ("click",function(){return i.useHealingScroll(null==i.equipment||null==i.equipment.scroll2?null:i.equipment.scroll2.name)}),e.YNc(10,Ee,1,1,"img",2),e.qZA(),e.TgZ(11,"div",7),e.NdJ("click",function(){return i.useHealingScroll(null==i.equipment||null==i.equipment.scroll3?null:i.equipment.scroll3.name)}),e.YNc(12,Ue,1,1,"img",2),e.qZA()(),e.YNc(13,Le,1,1,"ng-template",null,8,e.W1O),e.YNc(15,qe,1,1,"ng-template",null,9,e.W1O),e.YNc(17,Ne,1,1,"ng-template",null,10,e.W1O)),2&t){const s=e.MAs(14),a=e.MAs(16),r=e.MAs(18);e.xp6(2),e.Q6J("ngIf",i.equipment.weapon1)("ngIfElse",s),e.xp6(2),e.Q6J("ngIf",i.equipment.weapon2)("ngIfElse",s),e.xp6(2),e.Q6J("ngIf",i.equipment.key)("ngIfElse",a),e.xp6(2),e.Q6J("ngIf",i.equipment.scroll1)("ngIfElse",r),e.xp6(2),e.Q6J("ngIf",i.equipment.scroll2)("ngIfElse",r),e.xp6(2),e.Q6J("ngIf",i.equipment.scroll3)("ngIfElse",r)}},dependencies:[d.O5],styles:['.equipment-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;grid-gap:5px;grid-template-areas:"first-weapon first-scroll" "second-weapon second-scroll" "key third-scroll";width:100%;height:100%}.equipment-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:linear-gradient(130deg,rgba(31,27,48,.8) 0%,rgba(42,27,48,.8) 100%);border:2px solid #000;border-radius:2px;cursor:pointer}img[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none;width:calc(100% - 10px);height:calc(100% - 10px)}']}),n})();function $e(n,o){1&n&&e._UZ(0,"mat-icon",2),2&n&&e.Q6J("svgIcon","treasure-chest-solid")}let Ye=(()=>{class n{get treasuresArray(){return new Array(Math.round(this.treasures))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["collected-treasures"]],inputs:{treasures:"treasures"},decls:2,vars:1,consts:[[1,"treasures-wrapper"],["class","treasure",3,"svgIcon",4,"ngFor","ngForOf"],[1,"treasure",3,"svgIcon"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,$e,1,1,"mat-icon",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.treasuresArray))},dependencies:[d.sg,b.Hw],styles:[".treasures-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px}.treasure[_ngcontent-%COMP%]{width:40px;height:40px;color:#923840}"]}),n})(),Be=(()=>{class n{constructor(t,i,s,a,r){this.player=t,this.dialogRef=i,this.auth=s,this.roundStore=a,this.gameStore=r}onUseHealingScroll(){const t=this.roundStore.isCurrentPlayersRound(),i=this.player.userData.username===this.auth.getUsername();t&&i&&(this.dialogRef.close(),this.gameStore.useHealingScroll())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.WI),e.Y36(u.so),e.Y36(I.e),e.Y36(C),e.Y36(T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["player-details-dialog"]],decls:11,vars:7,consts:[["mat-dialog-title",""],[1,"mat-dialog-title__label"],["mat-icon-button","",1,"mat-dialog-title__close-button",3,"mat-dialog-close"],["svgIcon","times-square-solid"],["mat-dialog-content",""],[1,"player-container"],[1,"health",3,"healthPoints"],[1,"character"],[1,"equipment",3,"equipment","useScroll"],[1,"treasures",3,"treasures"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e._UZ(4,"mat-icon",3),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5),e._UZ(7,"player-health",6)(8,"div",7),e.TgZ(9,"player-equipment",8),e.NdJ("useScroll",function(){return i.onUseHealingScroll()}),e.qZA(),e._UZ(10,"collected-treasures",9),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(i.player.userData.username),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(4),e.Q6J("healthPoints",i.player.healthPoints),e.xp6(1),e.Udp("background-image","url(/assets/images/characters/"+i.player.characterName+".webp)"),e.xp6(1),e.Q6J("equipment",i.player.equipment),e.xp6(1),e.Q6J("treasures",i.player.treasures))},dependencies:[u.ZT,u.uh,u.xY,b.Hw,x.lW,Ie,He,Ye],styles:['.player-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px 180px 200px;grid-template-rows:300px;grid-gap:10px;grid-template-areas:"health character equipment" ".      treasures treasures"}.health[_ngcontent-%COMP%]{grid-area:health}.character[_ngcontent-%COMP%]{grid-area:character;background-repeat:no-repeat;background-position:center;background-size:cover;background-color:#1f1b3080;border:2px solid #000;border-radius:2px}.equipment[_ngcontent-%COMP%]{grid-area:equipment}.treasures[_ngcontent-%COMP%]{grid-area:treasures}']}),n})();var k=l(8184);function Je(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2,3),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.MAs(1),_=e.oxw();return e.KtG(_.onOpenPlayerDialog(a,r))}),e.ALo(2,"async"),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();let s;e.Udp("background-image","url(/assets/images/characters/"+t.characterName+"_ICON.webp)"),e.ekj("player--current-round",t.userData.username===(null==(s=e.lcZ(2,4,i.roundStore.currentRoundPlayer$))?null:s.username))}}let Qe=(()=>{class n{constructor(t,i,s,a){this.gameStore=t,this.roundStore=i,this.overlayPositionBuilder=s,this.dialog=a}onOpenPlayerDialog(t,i){this.dialogRef&&this.dialogRef.close();const s=i.getBoundingClientRect();this.dialogRef=this.dialog.open(Be,{autoFocus:!1,data:t,hasBackdrop:!0,backdropClass:"mat-dialog--no-background"}),this.dialogRef.updatePosition({left:s.x+s.width+10+"px",top:s.y+s.height/2-200+"px"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(C),e.Y36(k.wJ),e.Y36(u.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["game-players"]],decls:3,vars:3,consts:[[1,"players-container"],["class","player",3,"player--current-round","background-image","click",4,"ngFor","ngForOf"],[1,"player",3,"click"],["playerTrigger",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Je,3,6,"div",1),e.ALo(2,"async"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,i.gameStore.players$)))},dependencies:[d.sg,d.Ov],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);z-index:999}.players-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:10px 0 0 10px;z-index:9999}.player[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100px;height:100px;border:2px solid #000;border-radius:2px;background-color:#ae4043cc;background-repeat:no-repeat;background-position:center;background-size:cover;cursor:pointer;transition:transform .3s}.player--current-round[_ngcontent-%COMP%]{transform:scale(1.15) translate(6px)}"]}),n})(),Ge=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["empty-route-field"]],inputs:{fieldType:"fieldType",fieldRotation:"fieldRotation"},decls:2,vars:8,consts:[[1,"field"],[1,"field","field--hover"]],template:function(t,i){1&t&&e._UZ(0,"div",0)(1,"div",1),2&t&&(e.Udp("background-image","url(/assets/images/fields/"+i.fieldType+".webp)")("transform","rotate("+i.fieldRotation+"deg)"),e.xp6(1),e.Udp("background-image","url(/assets/images/fields/"+i.fieldType+".webp)")("transform","rotate("+i.fieldRotation+"deg)"))},styles:["[_nghost-%COMP%]{position:relative;display:block;height:150px;width:150px}[_nghost-%COMP%]:hover > .field--hover[_ngcontent-%COMP%]{display:block;opacity:.9}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;cursor:pointer;transition:box-shadow .3s;opacity:0;box-shadow:inset 0 0 100px #ffffff25;background-size:cover;animation:blink-animation 1.5s infinite}.field--hover[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background-size:cover;animation:none}@keyframes blink-animation{0%{opacity:0}50%{opacity:.5}to{opacity:0}}"]}),n})();function je(n,o){if(1&n&&e._UZ(0,"img",1),2&n){const t=o.$implicit;e.Udp("top",150*(21-t.position.y-1)+"px")("left",150*(t.position.x-1)+75+"px"),e.Q6J("src","assets/images/characters/"+t.characterName+".webp",e.LSH)}}let Xe=(()=>{class n extends Z.H{constructor(t){super(),this.gameStore=t,this.players=[]}ngOnInit(){this.initDataHandle()}playerMovement(t){const i=this.players.find(s=>s.userData.username===t.userData.username);t.path.forEach((s,a)=>{setTimeout(()=>i.position=s,600*a)})}initDataHandle(){this.gameStore.players$.pipe((0,c.R)(this.destroyed$),(0,R.h)(t=>!v.g.isNil(t))).subscribe(t=>this.players=t),this.gameStore.playerMoved$.pipe((0,c.R)(this.destroyed$),(0,R.h)(t=>!v.g.isNil(t))).subscribe(t=>this.playerMovement(t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["players-positions"]],features:[e.qOj],decls:1,vars:1,consts:[["class","player","alt","player",3,"src","top","left",4,"ngFor","ngForOf"],["alt","player",1,"player",3,"src"]],template:function(t,i){1&t&&e.YNc(0,je,1,5,"img",0),2&t&&e.Q6J("ngForOf",i.players)},dependencies:[d.sg],styles:["[_nghost-%COMP%]{display:block;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.player[_ngcontent-%COMP%]{position:absolute;width:50px;height:auto;z-index:1;transition:top .5s,left .5s}"]}),n})();const We=["fieldsWrapper"];function ze(n,o){if(1&n&&(e.TgZ(0,"div",10),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"async"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"game.label.movement-points"),": ",e.lcZ(3,4,t.roundStore.movementPoints$),"")}}function Ve(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"route-field",11),e.NdJ("click",function(s){const r=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.onOpenFieldMenu(s,r))}),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();e.Udp("grid-row-start",21-t.position.y)("grid-row-end",21-t.position.y)("grid-column-start",t.position.x)("grid-column-end",t.position.x+1),e.Q6J("field",t)("canPlayerMoveToField",i.canPlayerMoveToField(t.position.x,t.position.y))}}function Ke(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"empty-route-field",12),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onSetRouteField(a))}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();e.Udp("grid-row-start",21-t.position.y)("grid-row-end",21-t.position.y)("grid-column-start",t.position.x)("grid-column-end",t.position.x+1),e.Q6J("fieldType",e.lcZ(1,10,i.fieldRotation.currentFieldType$))("fieldRotation",e.lcZ(2,12,i.fieldRotation.currentFieldRotation$))}}function et(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onDrawRouteField())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"game.button.draw-the-field")," "))}function tt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onRoundOver())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"game.button.round-over")," "))}const nt=function(n,o,t,i){return[n,o,t,i]},it=[{path:"",component:(()=>{class n extends Z.H{constructor(t,i,s,a,r,_,P){super(),this.gameStore=t,this.chatStore=i,this.roundStore=s,this.auth=a,this.fieldRotation=r,this.route=_,this.dialog=P,this.routeFields=[],this.possibleRouteFields=[],this.fieldsToMovePlayer=[],this.players=[],this.Toolbar=ie.o,this.BoardUtils=S}ngOnInit(){this.initDataHandle(),this.gameStore.connectGameHub()}onOpenFieldMenu(t,i){const s={x:t.clientX,y:t.clientY},a=[m.SCROLL_TO_POINT,m.SHOW_INFO];this.canPlayerMoveToField(i.position.x,i.position.y)&&a.push(this.hasFieldEnemy(i.position.x,i.position.y)?m.FIGHT:m.MOVE),this.canPlayerOpenChest(i)&&a.push(m.OPEN_CHEST),this.canPlayerPickUpItem(i)&&a.push(m.PICK_UP_ITEM),this.dialog.open(ue,{data:a,autoFocus:!1,hasBackdrop:!0,backdropClass:"mat-dialog--no-background"}).updatePosition({left:s.x+10+"px",top:s.y+10+"px"}).afterClosed().pipe((0,R.h)(r=>!v.g.isNil(r))).subscribe(r=>this.fieldMenuActions(r,s,i))}fieldMenuActions(t,i,s){switch(t){case m.SCROLL_TO_POINT:{const a=this.fieldsWrapper.nativeElement.scrollTop-window.innerHeight/2+i.y,r=this.fieldsWrapper.nativeElement.scrollLeft-window.innerWidth/2+i.x;this.fieldsWrapper.nativeElement.scroll(r,a);break}case m.SHOW_INFO:{const a=this.players.filter(r=>r.position.x===s.position.x&&r.position.y===s.position.y);this.dialog.open(_e,{data:{enemy:s.enemy,players:a,itemName:s.itemName,chest:s.chest},autoFocus:!1,hasBackdrop:!0,backdropClass:"mat-dialog--no-background",maxHeight:"calc(100vh - 360px)",width:"350px"}).updatePosition({right:"20px",top:"110px"});break}case m.MOVE:case m.FIGHT:this.gameStore.movePlayer(s.position);break;case m.OPEN_CHEST:this.gameStore.openChest();break;case m.PICK_UP_ITEM:this.gameStore.pickUpItem()}}onSetRouteField(t){this.gameStore.setRouteField(t.position,this.fieldRotation.getCurrentRotation())}onDrawRouteField(){this.gameStore.getRouteField()}onRoundOver(){this.gameStore.roundOver()}canPlayerMoveToField(t,i){const s=this.roundStore.isCurrentPlayersRound(),a=this.fieldsToMovePlayer.some(r=>r.x===t&&r.y===i);return s&&a}canPlayerOpenChest(t){const i=this.players.find(P=>P.userData.username===this.currentRoundPlayer.username),s=t.chest,a=this.roundStore.isCurrentPlayersRound();return s&&a&&i.equipment.key&&i.position.x===t.position.x&&i.position.y===t.position.y}canPlayerPickUpItem(t){const i=this.players.find(_=>_.userData.username===this.currentRoundPlayer.username),s=!v.g.isNil(t.itemName),a=this.roundStore.isCurrentPlayersRound();return s&&a&&i.position.x===t.position.x&&i.position.y===t.position.y}hasFieldEnemy(t,i){return!v.g.isNil(this.routeFields.find(s=>s.position.x===t&&s.position.y===i).enemy)}movePlayer(t){const i=this.players.find(s=>s.userData.username===t.userData.username);t.path.forEach(s=>i.position=s)}initDataHandle(){this.gameStore.routeFields$.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.routeFields=t),this.gameStore.players$.pipe((0,c.R)(this.destroyed$),(0,R.h)(t=>!v.g.isNil(t))).subscribe(t=>this.players=t),this.gameStore.playerMoved$.pipe((0,c.R)(this.destroyed$),(0,R.h)(t=>!v.g.isNil(t))).subscribe(t=>this.movePlayer(t)),this.gameStore.gameOver$.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.dialog.open(be,{data:t,width:"800px",hasBackdrop:!0,backdropClass:"mat-dialog--no-clickable-background"})),this.fieldRotation.possibleFieldsWithCurrentFieldRotation$.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.possibleRouteFields=t),this.roundStore.currentRoundPlayer$.pipe((0,c.R)(this.destroyed$)).subscribe(t=>this.currentRoundPlayer=t),this.roundStore.positionsToMove$.pipe((0,c.R)(this.destroyed$),(0,R.h)(t=>!v.g.isNil(t))).subscribe(t=>this.fieldsToMovePlayer=t)}ngOnDestroy(){this.chatStore.disconnectChatHub(),this.gameStore.disconnectGameHub(),this.roundStore.closeFightDialog(),this.roundStore.closeFieldRotationDialog(),this.fieldRotationDialogRef&&this.fieldRotationDialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(xe.s),e.Y36(C),e.Y36(I.e),e.Y36(D),e.Y36(A.gz),e.Y36(u.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["game-page"]],viewQuery:function(t,i){if(1&t&&e.Gf(We,5),2&t){let s;e.iGM(s=e.CRH())&&(i.fieldsWrapper=s.first)}},features:[e.qOj],decls:15,vars:15,consts:[[1,"game-container"],[3,"items"],["class","move-points",4,"ngIf"],["scrollToCenter","","cdkScrollable","",1,"route-fields__wrapper"],["fieldsWrapper",""],[1,"route-fields__grid"],[3,"field","canPlayerMoveToField","grid-row-start","grid-row-end","grid-column-start","grid-column-end","click",4,"ngFor","ngForOf"],[3,"fieldType","fieldRotation","grid-row-start","grid-row-end","grid-column-start","grid-column-end","click",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","",3,"click",4,"ngIf"],[1,"move-points"],[3,"field","canPlayerMoveToField","click"],[3,"fieldType","fieldRotation","click"],["mat-flat-button","",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"toolbar",1)(2,"game-players"),e.YNc(3,ze,4,6,"div",2),e.TgZ(4,"div",3,4)(6,"div",5),e._UZ(7,"players-positions"),e.YNc(8,Ve,1,10,"route-field",6),e.YNc(9,Ke,3,14,"empty-route-field",7),e.qZA()(),e.TgZ(10,"div",8),e.YNc(11,et,3,3,"button",9),e.ALo(12,"async"),e.YNc(13,tt,3,3,"button",9),e.ALo(14,"async"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("items",e.l5B(10,nt,i.Toolbar.PROFILE,i.Toolbar.STATISTICS,i.Toolbar.SETTINGS,i.Toolbar.CHAT)),e.xp6(2),e.Q6J("ngIf",i.roundStore.isCurrentPlayersRound()),e.xp6(5),e.Q6J("ngForOf",i.routeFields),e.xp6(1),e.Q6J("ngForOf",i.possibleRouteFields),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,6,i.roundStore.isDrawFieldButtonVisible$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,8,i.roundStore.isRoundOverButtonVisible$)))},dependencies:[d.sg,d.O5,Ce.n,N.PQ,x.lW,Fe,Se,Qe,Ge,Xe,O.X$,d.Ov],styles:[".game-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;background:linear-gradient(130deg,#1F1B30 0%,#2A1B30 100%)}.route-fields__wrapper[_ngcontent-%COMP%]{max-width:100%;max-height:100%;overflow:auto;scroll-snap-align:center;scroll-behavior:smooth}.route-fields__grid[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:repeat(21,150px);grid-template-rows:repeat(21,150px);width:3150px;height:3150px;background:url(/assets/images/fields/EMPTY_FIELD.webp);background-size:150px 150px}.actions[_ngcontent-%COMP%]{position:absolute;left:20px;bottom:30px;display:flex;gap:10px}.actions[_ngcontent-%COMP%]   .mat-flat-button[_ngcontent-%COMP%]{width:200px}.move-points[_ngcontent-%COMP%]{position:absolute;bottom:80px;left:20px;width:200px;height:38px;line-height:38px;text-align:center;border-radius:4px;border:1px solid #000;background:linear-gradient(130deg,#1F1B30 0%,#2A1B30 100%);color:#ff6a4f;font-family:SigmarOne,sans-serif;z-index:10}"]}),n})()}];let ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[A.Bz.forChild(it),A.Bz]}),n})();l(7340);var E=l(3238);l(3353);const ct={provide:new e.OlP("mat-menu-scroll-strategy"),deps:[k.aV],useFactory:function lt(n){return()=>n.scrollStrategies.reposition()}};let ut=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[ct],imports:[d.ez,E.BQ,E.si,k.U8,N.ZD,E.BQ]}),n})(),dt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[q,T,D,C],imports:[$.m,ot,ut]}),n})()}}]);